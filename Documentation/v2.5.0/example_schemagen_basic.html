<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.8.1 at 2019-07-09 
 | Rendered using Apache Maven Fluido Skin 1.5
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20190709" />
    <meta http-equiv="Content-Language" content="en" />
    <title>JAXB-2 Maven Plugin &#x2013; Basic Examples - XML Schema Generation</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.5.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.5.min.js"></script>

                      </head>
        <body class="topBarDisabled">
          
    
    
            
    
        
    <a href="https://github.com/mojohaus/jaxb2-maven-plugin">
      <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
        src="https://s3.amazonaws.com/github/ribbons/forkme_right_gray_6d6d6d.png"
        alt="Fork me on GitHub">
    </a>
  
                
                    
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                    <a href="http://www.mojohaus.org/" id="bannerLeft">
                                                                                        <img src="http://www.mojohaus.org/images/mojo_logo.png"  alt="MojoHaus"/>
                </a>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
              
                              <li class="">
                    <a href="http://www.mojohaus.org/" class="externalLink" title="MojoHaus">
        MojoHaus</a>
                    <span class="divider">/</span>
      </li>
            <li class="">
                    <a href="http://www.mojohaus.org/mojo-parent" class="externalLink" title="MojoHaus Parent">
        MojoHaus Parent</a>
                    <span class="divider">/</span>
      </li>
            <li class="">
                    <a href="index.html" title="JAXB-2 Maven Plugin">
        JAXB-2 Maven Plugin</a>
                    <span class="divider">/</span>
      </li>
        <li class="active ">Basic Examples - XML Schema Generation</li>
        
              
                  <li id="publishDate" class="pull-right"><span class="divider">|</span> Last Published: 2019-07-09</li>
              <li id="projectVersion" class="pull-right">
                      <span class="divider">|</span>
                    Version: 2.5.0
        </li>
            
                                    
    <li class="pull-right">
                      <a href="http://maven.apache.org/" class="externalLink" title="Maven">
        Maven</a>
      </li>

                    </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
              
                <ul class="nav nav-list">
                    <li class="nav-header">Overview</li>
                              
      <li>
  
                          <a href="index.html" title="Introduction">
          <span class="none"></span>
        Introduction</a>
            </li>
                
      <li>
  
                          <a href="plugin-info.html" title="Goals">
          <span class="none"></span>
        Goals</a>
            </li>
                
      <li>
  
                          <a href="filters.html" title="Filters">
          <span class="none"></span>
        Filters</a>
            </li>
                
      <li>
  
                          <a href="faq.html" title="FAQ">
          <span class="none"></span>
        FAQ</a>
            </li>
                              <li class="nav-header">Examples</li>
                              
      <li>
  
                          <a href="example_xjc_basic.html" title="XJC: Usage">
          <span class="none"></span>
        XJC: Usage</a>
            </li>
                
      <li class="active">
  
            <a href="#"><span class="none"></span>Schemagen: Usage</a>
          </li>
                
      <li>
  
                          <a href="example_schemagen_postprocessing.html" title="Schemagen: Post-processing">
          <span class="none"></span>
        Schemagen: Post-processing</a>
            </li>
                              <li class="nav-header">Project Documentation</li>
                                                                                                                                                                                                                                                                                                        
      <li>
  
                          <a href="project-info.html" title="Project Information">
          <span class="icon-chevron-right"></span>
        Project Information</a>
                  </li>
                                                                                                                                                                                                                                    
      <li>
  
                          <a href="project-reports.html" title="Project Reports">
          <span class="icon-chevron-right"></span>
        Project Reports</a>
                  </li>
            </ul>
              
                            <form id="search-form" action="https://www.google.com/search" method="get" >
    
  <input value="www.mojohaus.org" name="sitesearch" type="hidden"/>
  <input class="search-query" name="q" id="query" type="text" />
</form>
<script type="text/javascript" src="https://cse.google.com/brand?form=search-form"></script>
          
          <hr />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span10" >
                                  
            <h1>Basic Examples - XML Schema Generation</h1>
<blockquote>

<p><b>Note</b>: These examples are valid for the 2.x version of the plugin, and do not work for the jaxb2-maven-plugin version 1.x</p>
</blockquote>
<p>These basic examples illustrate how to generate XSDs from JAXB-annotated Java classes using the jaxb2-maven-plugin, and highlight the use of some of the plugin&#x2019;s common configuration options. This plugin runs the JDK distribution&#x2019;s SchemaGenerator compiler (check JAVA_HOME/bin/schemagen), and integrates the SchemaGenerator&#x2019;s configuration properties into a Maven project. Also, the jaxb2-maven-plugin <a href="./example_schemagen_postprocessing.html">performs post-processing on generated XSD files</a> to improve usability and quality of the XSD files generated.</p>
<blockquote>

<div class="section">
<div class="section">
<h3><a name="Jaxb2-Maven-Plugin_and_Schemagen_known_issues"></a>Jaxb2-Maven-Plugin and <tt>Schemagen</tt> known issues</h3>
<p>The <tt>Schemagen</tt> tool has been around in the JDK for quite awhile, and should be considered a mature codebase. However, schemagen has some long-outstanding issues, as is shown by the</p>
<p><a class="externalLink" href="https://github.com/javaee/jaxb-v2/labels/Component%3A%20schemagen">SchemaGen Issue Tracker on GitHub</a>.</p>
<p>The Jaxb2-Maven-Plugin delegates its operations to the JDK-installed schemagen tool, and performs some post-processing operations to yield schemas with somewhat improved usability than the XSDs emitted by SchemaGen. However, the Jaxb2-Maven-Plugin does not aim to replace schemagen&#x2019;s implementation. Issues within SchemaGen must be solved in that codebase.</p>
</blockquote></div></div>
<div class="section">
<h2><a name="SchemaGenerator_in_the_JDK"></a>SchemaGenerator in the JDK</h2>
<p>The JDK contains the documentation for the SchemaGenerator arguments and switches. However, that documentation is somewhat slender and does not provide a thorough explanation for which types of &#x201c;Java Files&#x201d; can be used to generate XML schema:</p>

<div>
<div>
<pre class="source">Usage: schemagen [-options ...] &lt;java files&gt;
Options:
    -d &lt;path&gt;             : specify where to place processor and javac generated class files
    -cp &lt;path&gt;            : specify where to find user specified files
    -classpath &lt;path&gt;     : specify where to find user specified files
    -encoding &lt;encoding&gt;  : specify encoding to be used for apt/javac invocation
    -episode &lt;file&gt;       : generate episode file for separate compilation
    -version              : display version information
    -fullversion          : display full version information
    -help                 : display this usage message
</pre></div></div>

<p>The help listing from the schemagen tool above is taken from a JDK 1.7 installation, and the arguments change a little for other major JDKs. However, it seems that the SchemaGenerator tool expects the following to be true for each of its &#x201c;java files&#x201d; arguments:</p>

<table border="0" class="table table-striped">
    
<tr class="a">
        
<th width="35%">Property</th>
        
<th width="60%">Description</th>
    </tr>
    
<tr class="b">
        
<td>Not directories</td>
        
<td>If one of the &quot;java files&quot; arguments is a directory, the SchemaGenerator throws an
        IllegalArgumentException with the message <i>directories not supported</i>.</td>
    </tr>
    
<tr class="a">
        
<td>Java Source Files</td>
        
<td>&quot;java files&quot; arguments can be relative paths to source files, calculated from the System property
        <tt>user.dir</tt> (i.e. <i>not</i> the Maven property <tt>basedir</tt>), on the form
        <tt>src/main/java/se/west/something/SomeClass.java</tt>.</td>
    </tr>
    
<tr class="b">
        
<td>Bytecode Files</td>
        
<td>&quot;java files&quot; arguments can be fully qualified class names, such as <tt>se.west.gnat.Foo</tt>.
        In this case, the class file (<tt>Foo.class</tt>) should be in the correct directory
        (<tt>se/west/gnat</tt>) within the classpath (typically <tt>src/main/java</tt> or
        <tt>src/test/java</tt>).</td>
    </tr>
</table>

<p><b>Note</b>: <tt>schemagen</tt> does not accept a mix of source and bytecode arguments as &#x201c;java files&#x201d;. While the jaxb2-maven-plugin ensures that any sources added to the schemagen goals adheres to the criteria defined in the table above, it would lead too far to let the plugin validate that the user does not supply a mix of java source and bytecode files as arguments. If you would like to operate on bytecode files only, the plugin configuration must remove the sourcePath from the paths where it looks for jaxb sources.</p>
<p><b>Note</b>: <tt>schemagen</tt> can only insert documentation annotations when run against java source code files - not bytecode files.</p>
<p><b>Note</b>: The <tt>SchemaGen</tt> tool internally converts File paths to URIs and back, which means that exceptions occur when paths to your maven project contains whitespace. The current workaround is to avoid whitespace in paths whenever you need the plugin&#x2019;s <tt>schemagen</tt> goal to work properly.</p>
<p><b>Note</b>: The <tt>episode</tt> argument of schemagen does not seem to work.</p>
<p><b>Note</b>: The plugin currently requires that you run it from within the maven project directory, i.e. where the <tt>pom.xml</tt> file resides. If the project is part of a multi-module Maven build, Maven will take care of this for you.</p></div>
<div class="section">
<h2><a name="Recommended_JAXB_Annotations_for_XSD_generation"></a>Recommended JAXB Annotations for XSD generation</h2>
<p>XSD generation from JAXB-annotated Java classes uses schemagen from the JAXB specification to generate XSDs from bytecode. While the default JAXB settings are sometimes good enough for use, tailoring generated XSDs is a task that more often than not requires quite a lot of annotations injected into the source code. For further/full information about the JAXB annotations, please refer to the <a class="externalLink" href="https://jaxb.java.net/">JAXB Reference Implementation</a>.</p>
<p>However, some best practises are recommended to generate good-quality XSD from annotated Java classes:</p>
<ol style="list-style-type: decimal">

<li>Always define an @XmlType element containing propOrder and (optionally) namespace elements. The propOrder is used to define the XSD sequence of the elements within the ComplexType synthesized from the Java class. You need to ensure that the sequence is well-defined, which means that you should define the propOrder.</li>
<li>If your java class contains collections, be sure to annotate them with <tt>@XmlElementWrapper</tt> <b>and</b> <tt>@XmlElement</tt>. It is good practise to let the member value be plural (&#x201c;guildMemberships&#x201d; rather than &#x201c;guildMembership&#x201d;) in the java class, since it may contain several objects. The XmlElementWrapper annotation defines the name of the surrounding XML container, and the inner XmlElement annotation defines the name of each XML (child) element in the collection.</li>
<li>Place JavaDoc document comments on the private members. This documentation is entered as Documentation Annotations to the respective element definitions within the generated XSD file.</li>
<li>Create a TransformSchema configuration to map your namespace (<tt>http://some/namespace</tt>, for example) to a user friendly XML namespace prefix and a sensibly named XSD file. See the <a href="./example_schemagen_postprocessing.html">Postprocessing Example Page</a> for examples on how to configure the jaxb2-maven-plugin to use TransformSchema configurations.

<div>
<div>
<pre class="source">package se.west.schema;

import javax.xml.bind.annotation.XmlAccessType;
import javax.xml.bind.annotation.XmlAccessorType;
import javax.xml.bind.annotation.XmlAttribute;
import javax.xml.bind.annotation.XmlElement;
import javax.xml.bind.annotation.XmlType;

/**
 * This documentation will be copied as an XML Documentation Annotation for the ComplexType 'FooBar'.
 * Define it to augment usability/readability within the generated XSD.
 *
 * @author &lt;a href=&quot;mailto:lj@jguru.se&quot;&gt;Lennart J&amp;ouml;relid&lt;/a&gt;
 */
@XmlType(namespace = &quot;http://some/namespace&quot;,
    propOrder = {&quot;requiredElement&quot;, &quot;aRequiredElementInAnotherNamespace&quot;,
            &quot;optionalElement&quot;, &quot;requiredAttribute&quot;, &quot;optionalAttribute&quot;, &quot;guildMembership&quot;})
@XmlAccessorType(XmlAccessType.FIELD)
public class FooBar {

/**
 * This documentation will be copied as an XML Documentation Annotation for the 'requiredElement'.
 * Define it to augment usability/readability within the generated XSD.
 */
@XmlElement(required = true, defaultValue = &quot;requiredElementValue&quot;)
private String requiredElement;

@XmlElement(namespace = &quot;http://another/namespace&quot;, required = true, defaultValue = &quot;requiredElementValue&quot;)
private String aRequiredElementInAnotherNamespace;

/**
 * This documentation will be copied as an XML Documentation Annotation for the 'optionalElement'.
 * Define it to augment usability/readability within the generated XSD.
 */
@XmlElement(required = false)
private String optionalElement;

@XmlAttribute(required = true)
private String requiredAttribute;

@XmlAttribute(required = false)
private String optionalAttribute;

/**
 * The Guild Memberships of this FooBar. A nil value implies no GuildMemberships exist.
 */
@XmlElementWrapper(name = &quot;guildMemberships&quot;, nillable = true, required = false)
@XmlElement(name = &quot;guildMembership&quot;)
private Set&lt;GuildMembership&gt; guildMemberships;

...

}
</pre></div></div>
</li>
</ol>
<p>The example above is by no means a complete guide to JAXB compliant class design, but serves to illustrate best practises which eliminate some of the more common mistakes for correct XSD generation. Again, for further/full information about the JAXB annotations, please refer to the <a class="externalLink" href="https://jaxb.java.net/">JAXB Reference Implementation</a>.</p></div>
<div class="section">
<h2><a name="Standard_.28implicit.29_configuration"></a>Standard (implicit) configuration</h2>
<p>The following settings are used by default.</p>
<ol style="list-style-type: decimal">

<li>The standard source folders (i.e. <tt>getProject().getCompileSourceRoots()</tt>) are expected to contain JAXB-annotated files, to be included within the Xml Schema Compilation operation. By default, files matching some Java Regexp patterns are excluded from the JXC compilation. The default exclude patterns are<br />
<tt>&quot;README.*&quot;, &quot;\.xml&quot;, &quot;\.txt&quot;, &quot;\\.xjb&quot;, &quot;\\.xsd&quot;, &quot;\\.properties&quot;</tt> as documented on the <tt>SchemaGenerationMojo.STANDARD_SOURCE_EXCLUDE_FILTERS</tt> property.</li>
<li>The standard test source folders (i.e. <tt>getProject().getTestCompileSourceRoots()</tt>) are expected to contain JAXB-annotated files, to be included within the test-scope Xml Schema Compilation operation. By default, files matching some Java Regexp patterns are excluded from the JXC compilation. The default exclude patterns are<br />
<tt>&quot;README.*&quot;, &quot;\.xml&quot;, &quot;\.txt&quot;, &quot;\\.xjb&quot;, &quot;\\.xsd&quot;, &quot;\\.properties&quot;</tt> as documented on the <tt>TestSchemaGenerationMojo.STANDARD_TEST_SOURCE_EXCLUDE_FILTERS</tt> property.</li>
</ol>
<p>The standard behavior can be overridden by the following elements:</p>
<ol style="list-style-type: decimal">

<li><tt>sources</tt> - replace <tt>getProject().getCompileSourceRoots()</tt> as the files or directories containing JAXB-annotated source files.</li>
<li><tt>schemaSourceExcludeFilters</tt> - Replace the default exclusion filters with a custom suite of Filters.</li>
<li><tt>testSources</tt> - replace <tt>getProject().getTestCompileSourceRoots()</tt> as the files or directories containing JAXB-annotated source files for the test-scope compilation</li>
<li><tt>testSchemaSourceExcludeFilters</tt> - Replace the default test-scope exclusion filters with a custom suite of Filters.</li>
</ol>
<p>These configuration options are illustrated within the examples below. Also, feel free to investigate the integration tests of the plugin itself.</p></div>
<div class="section">
<h2><a name="Example_1:_Default_XSD_generation"></a>Example 1: Default XSD generation</h2>
<p>Generate XSD files from annotated Java classes is simple with the jaxb2-maven-plugin. Adding the plugin to your project and invoking its <tt>schemagen</tt> goal makes schemagen compile all java files found under the standard compile source roots (typically <tt>src/main/java</tt>):</p>

<div>
<div>
<pre class="source">        &lt;plugin&gt;
            &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;
            &lt;artifactId&gt;jaxb2-maven-plugin&lt;/artifactId&gt;
            &lt;executions&gt;
                &lt;execution&gt;
                    &lt;id&gt;schemagen&lt;/id&gt;
                    &lt;goals&gt;
                        &lt;goal&gt;schemagen&lt;/goal&gt;
                    &lt;/goals&gt;
                &lt;/execution&gt;
            &lt;/executions&gt;
            &lt;!--
                Use default configuration, implying that sources are read
                from the directory src/main/java below the project basedir.

                (i.e. getProject().getCompileSourceRoots() in Maven-speak).
            --&gt;
        &lt;/plugin&gt;
</pre></div></div>

<p>The output schema will be called <tt>schema1.xsd</tt>, <tt>schema2.xsd</tt> etc. and placed within the <tt>target/generated-resources/schemagen/</tt> folder.</p></div>
<div class="section">
<h2><a name="Example_2:_Exclude_source_files_from_processing"></a>Example 2: Exclude source files from processing</h2>
<p>The jaxb2-maven-plugin permits you to exclude selected source files from processing, using a set of Filters. If a Filter matches a candidate source file, it is excluded from processing. In the sample below, any file whose full path ends with <tt>jaxb.index</tt> will be ignored by schemagen even if found below a <tt>src/main/java</tt> directory:</p>

<div>
<div>
<pre class="source">        &lt;plugin&gt;
            &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;
            &lt;artifactId&gt;jaxb2-maven-plugin&lt;/artifactId&gt;
            &lt;executions&gt;
                &lt;execution&gt;
                    &lt;id&gt;schemagen&lt;/id&gt;
                    &lt;goals&gt;
                        &lt;goal&gt;schemagen&lt;/goal&gt;
                    &lt;/goals&gt;
                &lt;/execution&gt;
            &lt;/executions&gt;
            &lt;configuration&gt;
                &lt;!--
                 SchemaGenerator configuration properties, which excludes files found in the source directories.
                 This consists of a (List of) Filters, all of which should implement the

                 org.codehaus.mojo.jaxb2.shared.filters.Filter

                 interface.
               --&gt;
                &lt;schemaSourceExcludeFilters&gt;
                    &lt;noJaxbIndex implementation=&quot;org.codehaus.mojo.jaxb2.shared.filters.pattern.PatternFileFilter&quot;&gt;
                        &lt;patterns&gt;
                            &lt;pattern&gt;jaxb\.index&lt;/pattern&gt;
                        &lt;/patterns&gt;
                    &lt;/noJaxbIndex&gt;
                &lt;/schemaSourceExcludeFilters&gt;
            &lt;/configuration&gt;
        &lt;/plugin&gt;
</pre></div></div>

<p>The PatternFileFilter matches the supplied java regexp patterns to a String expression calculated from each candidate File found under the <tt>src/main/java</tt> directory, which means that the power of regular expressions can be used to create several patterns to exclude files:</p>

<div>
<div>
<pre class="source">                &lt;schemaSourceExcludeFilters&gt;
                    &lt;myExcludes implementation=&quot;org.codehaus.mojo.jaxb2.shared.filters.pattern.PatternFileFilter&quot;&gt;
                        &lt;patterns&gt;
                            &lt;pattern&gt;jaxb\.index&lt;/pattern&gt;
                            &lt;pattern&gt;\.txt&lt;/pattern&gt;
                            &lt;pattern&gt;\.mdo&lt;/pattern&gt;
                            &lt;pattern&gt;.*blep.*&lt;/pattern&gt;
                        &lt;/patterns&gt;
                    &lt;/myExcludes&gt;
                &lt;/schemaSourceExcludeFilters&gt;
</pre></div></div>

<p><b>Note</b>: The name of the element defining the pattern (<tt>myExcludes</tt> in the snippet above) is unimportant. Maven will create a Filter object for each element to the <tt>schemaSourceExcludeFilters</tt> List, and inject it into the parameter called <tt>schemaSourceExcludeFilters</tt>. This is a result of the parameter definition:</p>

<div>
<div>
<pre class="source">            @Parameter(required = false)
            private List&lt;Filter&lt;File&gt;&gt; schemaSourceExcludeFilters;
</pre></div></div>

<p>Please refer to the standard <a class="externalLink" href="http://maven.apache.org/guides/mini/guide-configuring-plugins.html">Maven Documentation for configuring plugins</a> for further information about configuring plugins.</p>
<div class="section">
<h3><a name="Default_excludes"></a>Default excludes</h3>
<p>Should no configuration be given, standard excludes are:</p>
<ol style="list-style-type: decimal">

<li>Files with the name &#x201c;README.*&#x201d;</li>
<li>Files with the suffixes &#x201c;.xml&#x201d;, &#x201c;.txt&#x201d; or &#x201c;.xsd&#x201d;</li>
<li>Files or Directories whose names starts with &#x201c;.&#x201d; (normally this implies hidden directories and setting files)</li>
<li>Directories with the name &#x201c;CVS&#x201d;</li>
</ol></div></div>
<div class="section">
<h2><a name="Example_3:_PatternFileFilter_custom_configuration"></a>Example 3: PatternFileFilter custom configuration</h2>
<p>Your project might have complex rules for determining which files should be excluded from a schemagen compilation. To cater for potentially complex filtering needs, you may either configure the PatternFileFilter to cater for your needs or implement a custom Filter. This example illustrates how to configure the PatternFileFilter.</p>
<p>PatternFileFilters may use several (optional) configuration settings to customize their work process (look for setter methods in the PatternFileFilter JavaDoc). Two of the commonly used configuration settings are:</p>
<ol style="list-style-type: decimal">

<li><i>patternPrefix</i>: Java Regular Expressions can be rather lengthy, and frequently have similar structure with the difference only being the last part. The <tt>patternPrefix</tt> property contains a string to prepend to all patterns to yield the final java regexp pattern - and unless overridden, the default pattern prefix is <tt>(\p{javaLetterOrDigit}|\p{Punct})+</tt>. In the configuration snippet below, the patternPrefix is set to <tt>*</tt> instead. Therefore, the regular expression used to match Files with in the example shown below is <tt>.*Bar\.java</tt>.</li>
<li><i>converter</i>: Java Regular Expressions compare and match Strings to Patterns. However, each candidate supplied to the PatternFileFiler is a <tt>java.io.File</tt> object, and we must therefore somehow convert the File to a String before we can match it with the complete regular expression as shown above. This conversion is done by a StringConverter (see the <a href="./javadoc/">JavaDoc</a>) which simply contains a method <tt>String convert(T toConvert);</tt> which emits a String synthesized from each File object. The default implementation (below) simply retrieves the canonical absolute path for each File, but you may override this and supply a custom implementation - simply implement the StringConverter in a manner similar to the following (substituting for your preferred algorithm):

<div>
<div>
<pre class="source">/**
 * Converter returning the canonical and absolute path for a File.
 */
public static final StringConverter&lt;File&gt; FILE_PATH_CONVERTER = new StringConverter&lt;File&gt;() {
   @Override
   public String convert(final File toConvert) {
       return FileSystemUtilities.getCanonicalPath(toConvert.getAbsoluteFile());
   }
};
</pre></div></div>
</li>
</ol>
<p>Finally, the configuration example below shows how to override the default pattern prefix and StringConverter:</p>

<div>
<div>
<pre class="source">                &lt;!--
                 SchemaGenerator configuration properties, which excludes files found in the source directories.
                 This consists of a (List of) Filters, all of which should implement the

                 org.codehaus.mojo.jaxb2.shared.filters.Filter

                 interface.

                 Also, use a custom StringConverter for the found Files.
               --&gt;
                &lt;schemaSourceExcludeFilters&gt;
                    &lt;noBarFile implementation=&quot;org.codehaus.mojo.jaxb2.shared.filters.pattern.PatternFileFilter&quot;&gt;
                        &lt;patterns&gt;
                            &lt;pattern&gt;Bar\.java&lt;/pattern&gt;
                        &lt;/patterns&gt;
                        &lt;patternPrefix&gt;.*&lt;/patternPrefix&gt;
                        &lt;converter implementation=&quot;se.west.converter.FileNameConverter&quot;/&gt;
                    &lt;/noBarFile&gt;
                &lt;/schemaSourceExcludeFilters&gt;
</pre></div></div>

<p>If your implementation class <tt>se.west.converter.FileNameConverter</tt> is located in a separate project, remember to make that implementation class accessible to the jaxb2-maven-plugin. This is done by Maven&#x2019;s default dependency mechanism for plugins, as illustrated by the full configuration example below.</p>

<div>
<div>
<pre class="source">        &lt;plugin&gt;
            &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;
            &lt;artifactId&gt;jaxb2-maven-plugin&lt;/artifactId&gt;
            &lt;executions&gt;
                &lt;execution&gt;
                    &lt;id&gt;schemagen&lt;/id&gt;
                    &lt;goals&gt;
                        &lt;goal&gt;schemagen&lt;/goal&gt;
                    &lt;/goals&gt;
                &lt;/execution&gt;
            &lt;/executions&gt;
            &lt;configuration&gt;
                &lt;!--
                    Place the generated XSDs in a custom location.
                --&gt;
                &lt;xsdPathWithinArtifact&gt;generated/xsds&lt;/xsdPathWithinArtifact&gt;
                &lt;!--
                 SchemaGenerator configuration properties, which excludes files found in the source directories.
                 This consists of a (List of) Filters, all of which should implement the

                 org.codehaus.mojo.jaxb2.shared.filters.Filter

                 interface.

                 Also, use a custom StringConverter for the found Files.
               --&gt;
                &lt;schemaSourceExcludeFilters&gt;
                    &lt;noBarFile implementation=&quot;org.codehaus.mojo.jaxb2.shared.filters.pattern.PatternFileFilter&quot;&gt;
                        &lt;patterns&gt;
                            &lt;pattern&gt;Bar\.java&lt;/pattern&gt;
                        &lt;/patterns&gt;
                        &lt;patternPrefix&gt;.*&lt;/patternPrefix&gt;
                        &lt;converter implementation=&quot;se.west.converter.FileNameConverter&quot;/&gt;
                    &lt;/noBarFile&gt;
                &lt;/schemaSourceExcludeFilters&gt;
            &lt;/configuration&gt;
            &lt;dependencies&gt;
                &lt;dependency&gt;
                    &lt;groupId&gt;se.west.converters&lt;/groupId&gt;
                    &lt;artifactId&gt;custom-jaxb-converters&lt;/artifactId&gt;
                    &lt;version&gt;1.2.14&lt;/version&gt;
                &lt;/dependency&gt;
            &lt;/dependencies&gt;
        &lt;/plugin&gt;
</pre></div></div>
</div>
<div class="section">
<h2><a name="Example_4:_Debugging_jaxb2-maven-plugin_executions"></a>Example 4: Debugging jaxb2-maven-plugin executions</h2>
<p>If you are curious about the exact java regexp patterns used for matching your files, or simply want to see what the jaxb2-maven-plugin does internally, run the plugin in debug mode by adding the <tt>-X</tt> switch. The debug log contains somewhat human-friendly log entries which contains the SchemaGen arguments synthesized by the jaxb2-maven-plugin and supplied in order:</p>

<div>
<div>
<pre class="source">    +=================== [9 SchemaGen Arguments]
    |
    | [0]: -encoding
    | [1]: UTF-8
    | [2]: -d
    | [3]: /Users/lj/Development/Projects/Codehaus/github_jaxb2_plugin/target/it/schemagen-main/target/schemagen-work/compile_scope
    | [4]: -classpath
    | [5]: /Users/lj/Development/Projects/Codehaus/github_jaxb2_plugin/target/it/schemagen-main/src/main/java/
    | [6]: -episode
    | [7]: /Users/lj/Development/Projects/Codehaus/github_jaxb2_plugin/target/it/schemagen-main/target/generated-resources/schemagen/META-INF/sun-jaxb.episode
    | [8]: src/main/java/se/west/gnat/Foo.java
    |
    +=================== [End 9 SchemaGen Arguments]
</pre></div></div>

<p>If you would like to run SchemaGen manually in the same way as the jaxb2-maven-plugin runs the tool, simply paste the arguments given in the debug listing into a shell (separate with spaces).</p>
<p>The debug log also shows the configuration and result of the configured PatternFileFilters; as shown in the listing below, two PatternFileFilters containing 3 java regular expression patterns each are applied to the files found below the standard directory <tt>src/main/java</tt>. The listing shows the java regexps in use, and the resulting file after removing all files identified by the two PatternFileFilters:</p>

<div>
<div>
<pre class="source">    +=================== [Filtered sources]
    |
    | 2 Exclude patterns:
    | [1/2]: Filter [PatternFileFilter]
    |        Processes nulls: [false]
    |        Accept on match: [true]
    |        3 regularExpressions ...
    |         [0/3]: (\p{javaLetterOrDigit}|\p{Punct})+README.*
    |         [1/3]: (\p{javaLetterOrDigit}|\p{Punct})+\.xml
    |         [2/3]: (\p{javaLetterOrDigit}|\p{Punct})+\.txt
    | [2/2]: Filter [PatternFileFilter]
    |        Processes nulls: [false]
    |        Accept on match: [true]
    |        3 regularExpressions ...
    |         [0/3]: (\p{javaLetterOrDigit}|\p{Punct})+\.xjb
    |         [1/3]: (\p{javaLetterOrDigit}|\p{Punct})+\.xsd
    |         [2/3]: (\p{javaLetterOrDigit}|\p{Punct})+\.properties
    |
    | 1 Standard Directories:
    | [1/1]: /Users/lj/Development/Projects/Codehaus/github_jaxb2_plugin/target/it/schemagen-main/src/main/java
    |
    | 1 Results:
    | [1/1]: file:/Users/lj/Development/Projects/Codehaus/github_jaxb2_plugin/target/it/schemagen-main/src/main/java/se/west/gnat/Foo.java
    |
    +=================== [End Filtered sources]
</pre></div></div>

<p>Also, the jaxb2-maven-plugin debug log contains debug log statements emitted from the underlying tools themselves (SchemaGen or XJC). These statements may be formatted in somewhat strange ways, but starts with the name of the tool encased in brackets. As illustrated below, the SchemaGen tool emitted a debug statement from the createOutput method with the content <tt>ENTRY schema1.xsd</tt>:</p>

<div>
<div>
<pre class="source">    [DEBUG] [SchemaGen]: feb 03, 2015 3:39:15 EM com.sun.xml.bind.v2.schemagen.FoolProofResolver createOutput
    FINER: ENTRY  schema1.xsd
</pre></div></div>

<p>Yes &#x2026; you get the timestamp for free &#x2026;</p>
<h1>Example 5: Setting the locale for the SchemaGen execution</h1>
<p>If you require the SchemaGen tool to be executed with a default Locale other than your standard default Locale, simply use the <tt>locale</tt> configuration parameter and supply a string parseable to a Locale on the form <tt>&lt;language&gt;[,&lt;country&gt;[,&lt;variant&gt;]]</tt>. For example, to generate the schema using french locale despite running Maven with another Locale, configure the jaxb2-maven-plugin as follows:</p>

<div>
<div>
<pre class="source">        &lt;plugin&gt;
            &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;
            &lt;artifactId&gt;jaxb2-maven-plugin&lt;/artifactId&gt;
            &lt;executions&gt;
                &lt;execution&gt;
                    &lt;id&gt;schemagen&lt;/id&gt;
                    &lt;goals&gt;
                        &lt;goal&gt;schemagen&lt;/goal&gt;
                    &lt;/goals&gt;
                &lt;/execution&gt;
            &lt;/executions&gt;
            &lt;configuration&gt;
                &lt;locale&gt;fr&lt;/locale&gt;
            &lt;/configuration&gt;
        &lt;/plugin&gt;
</pre></div></div>

<p>The generated schema</p>

<div>
<div>
<pre class="source">/**
 * &lt;p&gt;Classe Java pour AddressType complex type.
 * 
 * &lt;p&gt;Le fragment de sch&#xe9;ma suivant indique le contenu attendu figurant dans cette classe.
 * 
 * &lt;pre&gt;
 * &amp;lt;complexType name=&quot;AddressType&quot;&amp;gt;
 *   &amp;lt;complexContent&amp;gt;
 *     &amp;lt;restriction base=&quot;{http://www.w3.org/2001/XMLSchema}anyType&quot;&amp;gt;
 *       &amp;lt;sequence&amp;gt;
 *         &amp;lt;element name=&quot;Name&quot; type=&quot;{http://www.w3.org/2001/XMLSchema}string&quot;/&amp;gt;
 *         &amp;lt;element name=&quot;Line1&quot; type=&quot;{http://www.w3.org/2001/XMLSchema}string&quot;/&amp;gt;
 *         &amp;lt;element name=&quot;Line2&quot; type=&quot;{http://www.w3.org/2001/XMLSchema}string&quot;/&amp;gt;
 *         &amp;lt;element name=&quot;City&quot; type=&quot;{http://www.w3.org/2001/XMLSchema}string&quot;/&amp;gt;
 *         &amp;lt;element name=&quot;State&quot; type=&quot;{http://www.w3.org/2001/XMLSchema}string&quot;/&amp;gt;
 *         &amp;lt;element name=&quot;ZipCode&quot; type=&quot;{http://www.w3.org/2001/XMLSchema}decimal&quot;/&amp;gt;
 *       &amp;lt;/sequence&amp;gt;
 *     &amp;lt;/restriction&amp;gt;
 *   &amp;lt;/complexContent&amp;gt;
 * &amp;lt;/complexType&amp;gt;
 * &lt;/pre&gt;
 * 
 * 
 */
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = &quot;AddressType&quot;, propOrder = {
    &quot;name&quot;,
    &quot;line1&quot;,
    &quot;line2&quot;,
    &quot;city&quot;,
    &quot;state&quot;,
    &quot;zipCode&quot;
})
@Generated(value = &quot;com.sun.tools.xjc.Driver&quot;, date = &quot;2015-07-12T08:33:24+02:00&quot;, comments = &quot;JAXB RI v2.2.11&quot;)
public class AddressType { .... }
</pre></div></div>
</div>
<div class="section">
<h2><a name="Advanced_topic:_SchemaGen_source_vs._bytecode_arguments"></a>Advanced topic: SchemaGen source vs. bytecode arguments</h2>
<p>The SchemaGen tool assumes that all relative paths to source files are calculated from the system property <tt>user.dir</tt>, as described above. For maven multi-module projects the <tt>user.dir</tt> property is defined as the directory where the <tt>mvn</tt> command was launched - and the jaxb2-maven-plugin calculates the relative path from this directory to the actual file. This implies that schemagen will need a full path to its source file arguments, but only a fully qualified classname for bytecode arguments. Also, the schemagen tool requires <i>either</i> source or bytecode arguments - not both.</p>
<p>A native schemagen command will therefore take one of the following forms:</p>

<div>
<div>
<pre class="source">schemagen -d target/classes src/main/java/se/west/gnat/Foo.java

... or, if you generate schema from already compiled bytecode files:

schemagen -d target/classes se.west.gnat.Bar
</pre></div></div>

<p>While the jaxb2-maven-plugin could potentially include some snazzy and complex code to ensure that the arguments would be only either source or bytecode files, the underlying schemagen tool will complain visibly if the argument combinations are incorrect. Thus, the jaxb2-maven-plugin authors felt it would be better to simply delegate the error handling in this case to schemagen, to avoid creating a new layer of potentially complex logic within the plugin.</p></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
                      <div class="row-fluid">
                                      <p >Copyright &copy;                    2005&#x2013;2019
                        <a href="http://www.mojohaus.org">MojoHaus</a>.
            All rights reserved.    
      </p>
                </div>

        
          
    
    
                
    <div id="ohloh" class="pull-right">
      <script type="text/javascript" src="https://www.ohloh.net/p/5211/widgets/project_thin_badge.js"></script>
    </div>
        </div>
    </footer>
        </body>
</html>
